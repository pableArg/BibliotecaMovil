Index: app/src/main/java/com/example/bibliotecamovil/bibliotecamovil/ui/adapter/BookAdapter.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.bibliotecamovil.bibliotecamovil.ui.adapter\r\n\r\nimport android.content.Context\r\nimport android.view.LayoutInflater\r\nimport android.view.View\r\nimport android.view.ViewGroup\r\nimport android.widget.ImageView\r\nimport android.widget.TextView\r\nimport android.widget.Toast\r\nimport androidx.cardview.widget.CardView\r\nimport androidx.recyclerview.widget.RecyclerView\r\nimport com.example.bibliotecamovil.R\r\nimport com.example.bibliotecamovil.bibliotecamovil.data.repositories.retrofit.Book\r\nimport com.example.bibliotecamovil.bibliotecamovil.domain.model.BookResponse\r\nimport com.example.bibliotecamovil.databinding.ItemCardBinding\r\nimport com.squareup.picasso.Picasso\r\n\r\n\r\nclass BookAdapter(var bookList: List<Book>) :\r\n\r\n    RecyclerView.Adapter<BookViewHolder>() {\r\n    private var listBook = mutableListOf<Book>()\r\n\r\n\r\n    private lateinit var binding: ItemCardBinding\r\n\r\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): BookViewHolder {\r\n\r\n        val bookBinding =\r\n            ItemCardBinding.inflate(LayoutInflater.from(parent.context), parent, false)\r\n        return BookViewHolder(bookBinding)\r\n    }\r\n\r\n    override fun onBindViewHolder(holder: BookViewHolder, position: Int) {\r\n        val book = bookList[position]\r\n\r\n        holder.binding.titleBook.text = book.libroInfo.titulo\r\n        holder.binding.author.text = book.libroInfo.autores[0]\r\n        val idLibro = book.id\r\n\r\n        Picasso.get()\r\n            .load(\"https://books.google.com/books/content?id=$idLibro&printsec=frontcover&img=1&zoom=1&source=gbs_api\")\r\n            .placeholder(R.drawable.notfound)\r\n            .into(holder.binding.imageBook)\r\n\r\n\r\n        holder.binding.image.setOnClickListener {\r\n            val context: Context = holder.itemView.context\r\n            Toast.makeText(\r\n                context,\r\n                \"Este es el ${book.libroInfo.titulo}\",\r\n                Toast.LENGTH_SHORT\r\n            ).show()\r\n        }\r\n\r\n    }\r\n\r\n    override fun getItemCount(): Int = bookList.size\r\n\r\n}\r\n\r\nclass BookViewHolder(val binding: ItemCardBinding) : RecyclerView.ViewHolder(binding.root)\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/bibliotecamovil/bibliotecamovil/ui/adapter/BookAdapter.kt b/app/src/main/java/com/example/bibliotecamovil/bibliotecamovil/ui/adapter/BookAdapter.kt
--- a/app/src/main/java/com/example/bibliotecamovil/bibliotecamovil/ui/adapter/BookAdapter.kt	(revision 84d106c0e014440c001372a19f3c65524c7e5ee6)
+++ b/app/src/main/java/com/example/bibliotecamovil/bibliotecamovil/ui/adapter/BookAdapter.kt	(date 1654887638813)
@@ -1,28 +1,29 @@
 package com.example.bibliotecamovil.bibliotecamovil.ui.adapter
 
-import android.content.Context
 import android.view.LayoutInflater
-import android.view.View
 import android.view.ViewGroup
-import android.widget.ImageView
-import android.widget.TextView
-import android.widget.Toast
-import androidx.cardview.widget.CardView
+import androidx.navigation.findNavController
 import androidx.recyclerview.widget.RecyclerView
 import com.example.bibliotecamovil.R
+import com.example.bibliotecamovil.bibliotecamovil.data.database.LibraryFavDatabase
+import com.example.bibliotecamovil.bibliotecamovil.data.database.BookFavEntity
 import com.example.bibliotecamovil.bibliotecamovil.data.repositories.retrofit.Book
-import com.example.bibliotecamovil.bibliotecamovil.domain.model.BookResponse
+import com.example.bibliotecamovil.bibliotecamovil.ui.fragments.SearchFragmentDirections
+import com.example.bibliotecamovil.bibliotecamovil.ui.viewModels.DetailViewModel
 import com.example.bibliotecamovil.databinding.ItemCardBinding
 import com.squareup.picasso.Picasso
+import org.koin.androidx.compose.inject
+import org.koin.java.KoinJavaComponent.inject
 
 
-class BookAdapter(var bookList: List<Book>) :
+class BookAdapter(var bookList: MutableList<Book>) :
 
     RecyclerView.Adapter<BookViewHolder>() {
-    private var listBook = mutableListOf<Book>()
+    private lateinit var databse: LibraryFavDatabase
 
+    private val detailViewModel: DetailViewModel by inject(DetailViewModel::class.java)
 
-    private lateinit var binding: ItemCardBinding
+
 
     override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): BookViewHolder {
 
@@ -43,14 +44,18 @@
             .placeholder(R.drawable.notfound)
             .into(holder.binding.imageBook)
 
+        holder.binding.imageBook.setOnClickListener { fabView ->
+            detailViewModel.bookDetail.value = book
+            fabView.findNavController().navigate(
+                SearchFragmentDirections
+                    .actionSearchFragmentToDetailFragment()
+
+            )
 
-        holder.binding.image.setOnClickListener {
-            val context: Context = holder.itemView.context
-            Toast.makeText(
-                context,
-                "Este es el ${book.libroInfo.titulo}",
-                Toast.LENGTH_SHORT
-            ).show()
+
+        }
+        holder.binding.favouriteBook.setOnClickListener {
+            databse.bookFavDao().insert(BookFavEntity(idLibro))
         }
 
     }
